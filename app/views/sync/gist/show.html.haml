- content_for :title do
  Gists synchronization


%div= link_to 'back', root_path

%h3 Sync your Github gists into #{@user.preferred_cloud.human_name}

%div
  - if @gists[:github] != @gists[:cloud]
    %table.table-hover.table
      %thead
        %tr
          %th disabled
          %th on #{@user.preferred_cloud.human_name}
          %th on Github


      %tbody
        = form_tag sync_upload_gist_path, :method => :post do

          - @gists[:github].each do |gist_id, gist|
            - gist_name = 'gists[' + gist_id + ']'
            - gist_radio_button_name = gist_name + '[sync]'
            %tr
              %td.span2
                = radio_button_tag gist_radio_button_name, 'disabled', true
              %td.span5
                - unless @gists[:cloud][gist_id].nil?
                  = render 'layouts/gist', :gist => @gists[:cloud][gist_id], :gist_id => gist_id, :storage => 'cloud'
                  %div.btn-container
                    = radio_button_tag gist_radio_button_name, 'cloud', true
                  - @gists[:cloud].delete(gist_id)
              %td.span5
                %div.btn-container
                  = radio_button_tag gist_radio_button_name, 'github', true
                = render 'layouts/gist', :gist => gist, :gist_id => gist_id, :storage => 'github'



          - @gists[:cloud].each do |gist_id, gist|
            %tr
              %td.span2
                = radio_button_tag gist_radio_button_name, nil, true
              %td.span5
                = render 'layouts/gist', :gist => gist, :gist_id => gist_id, :storage => 'cloud'
                %div.btn-container
                  = radio_button_tag gist_radio_button_name, 'cloud', true
              %td.span5


          %tr
            %td{:colspan => 3}
              = submit_tag 'Sync!', :class => 'btn'




    -#%p So you can upload your data to:
    -#%div.cv_file_name
    -#  = form_tag sync_upload_gist_path, :method => :post do
    -#    %div
    -#      #{@user.preferred_cloud.human_name}/#{@user.preferred_cloud.gists_folder}/
    -#      = text_field_tag :cv_file_name, @user.preferred_cloud.cv_file_name, :placeholder => 'file_name'
    -#    %div= hidden_field_tag :cv_data, @cv[:linkedin][:data]
    -#    %div= submit_tag 'Start!', :class => 'btn'

  - else
    %div It seems like your data is already synchronized with #{@user.preferred_cloud.human_name}!
    -#%div
    -#  Link:
    -#  = link_to @cv[:cloud][:url], @cv[:cloud][:url], :target => '_blank'
